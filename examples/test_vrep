#!/usr/bin/env python

"""
This is a script for testing the example v-rep simulation
`arm_scene_example.ttt`. The purpose is to demonstrate how the simulation
works, not necessarily to test the vrepsim module.
"""

import time
import sys

try:
    from pygesture.simulation import config, vrepsim
except ImportError:
    sys.path.insert(0, '..')
    from pygesture.simulation import config, vrepsim

sim = vrepsim.VrepSimulation(config.vrep_port)
sim.start()
robot = vrepsim.Robot(sim.clientId, config.actions)

def do(action, length):
    """
    Shorthand for doing an action for some time, then resting.
    """
    robot.do_action(action)
    time.sleep(length)
    robot.do_action("rest")

do("forearm-supination", 1.5)
do("wrist-flexion", 1.8)
do("closed-fist", 2.0)
do("wrist-extension", 1.3)
do("forearm-pronation", 1.8)

time.sleep(1)

do("forearm-supination", 1.8)
do("wrist-flexion", 1.2)
do("open-hand", 1.0)
do("wrist-extension", 1.9)

time.sleep(1)

sim.finish()
